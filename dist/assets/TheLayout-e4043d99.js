import{_ as S}from"./BaseIcon-c41f9e09.js";import{Q as T,r as y,R as _,i as N,S as A,n as I,T as $,f as B,N as E,g as P,u as L,j as r,o as u,c as v,a as s,K as x,l as d,b as o,w as t,P as R,k,E as U,U as V,p as j,m as q,y as M}from"./index-ac5c08ef.js";import{_ as H}from"./logo-c69ae777.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";import{u as G,_ as K}from"./useCategoryProduct-3de31c68.js";const z=T("auth",()=>{const c=y({userId:0,firstName:"",lastName:"",fullName:"",displayName:"",email:"",login2faEnabled:0,avatar:"",userType:"",phoneVerified:0,emailVerified:0,roles:[],roundsUserCanBuy:[],affiliationCode:""}),a=y({userId:_.get("user_id")||"",token:_.get("access_token")||"",refreshToken:""}),i=N(()=>!!a.value.token&&A(a.value.token)!=="");return{user:c,authUser:a,isLogin:i,login:async l=>{try{const e=await I.login(l);return console.log(e,"LOGIN"),a.value=e,$.defaults.headers.common.Authorization=`Bearer ${e.token}`,_.set("access_token",e.token,{expires:1}),_.set("user_id",e.userId,{expires:1}),Promise.resolve()}catch(e){return Promise.reject(e)}},logout:()=>{try{c.value={},a.value={},_.remove("access_token"),_.remove("user_id"),$.defaults.headers.common.Authorization=""}catch(l){console.log(l)}},getInfoUser:async()=>{const l=_.get("user_id"),e=await I.getInfo(l);console.log(e),c.value=e}}}),O={class:"flex items-center justify-between h-full"},Q={class:"text-2xl leading-8 font-semibold"},F={class:"avatar"},J={class:"el-dropdown-link",style:{color:"#201f1e"}},W=["src"],X={class:"text-base font-semibold text-primary",style:{"padding-bottom":"4px"}},Y={key:0,class:"be-flex align-center ref-code"},Z={class:"text-sm",style:{color:"#5b616e","padding-right":"6px"}},ee=s("span",{class:"line"},null,-1),oe=s("span",null,"Change password",-1),te=s("span",null,"Sign out",-1),se=B({__name:"TheHeader",setup(c){const a=E();P();const i=z(),p=L(),n=N(()=>i.user),m=e=>{e==="logout"&&i.logout().then(()=>{p.push("/login")})},l=()=>{const e=document.createElement("input");e.value=n.value.affiliationCode,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),U.success("Copied")};return(e,w)=>{const h=S,f=r("el-dropdown-item"),b=r("el-dropdown-menu"),g=r("el-dropdown");return u(),v("div",O,[s("p",Q,x(d(a).meta.title),1),s("div",F,[o(g,{trigger:"click",placement:"bottom-end","popper-class":"popper-avatar-header",onCommand:m},{dropdown:t(()=>[o(b,null,{default:t(()=>[o(f,{class:"item-above"},{default:t(()=>[s("span",X,x(d(n).fullName),1),d(n).affiliationCode?(u(),v("div",Y,[s("span",Z," Referral code: "+x(d(n).affiliationCode),1),o(h,{icon:"copy",class:"cursor",onClick:l})])):R("",!0),ee]),_:1}),o(f,{class:"item-below",command:"change-pass"},{default:t(()=>[oe]),_:1}),o(f,{class:"item-below",command:"logout"},{default:t(()=>[te]),_:1})]),_:1})]),default:t(()=>[s("span",J,[d(n).avatar?(u(),v("img",{key:1,src:d(n).avatar,class:"w-10 h-10 rounded-full object-cover"},null,8,W)):(u(),k(h,{key:0,icon:"default-avatar",size:"40"}))])]),_:1})])])}}});const ne={},C=c=>(j("data-v-8cfebf76"),c=c(),q(),c),ae={class:"h-full overflow-y-auto border-r border-solid border-[#ccc]"},ce=["onClick"],re=C(()=>s("img",{alt:"",class:"w-8",src:H},null,-1)),le=C(()=>s("p",{class:"mt-[3px] text-[10px] leading-3 text-[#201f1e]"},"Home",-1)),ie=[re,le],_e=["onClick"],de=C(()=>s("p",{class:"mt-[3px] text-[10px] leading-3 text-[#201f1e]"},"Product",-1));function ue(c,a){const i=r("router-link"),p=S;return u(),v("div",ae,[o(i,{to:{name:"ProductManagement"},custom:""},{default:t(({navigate:n})=>[s("div",{class:"menu",role:"link",onClick:n},ie,8,ce)]),_:1}),o(i,{to:{name:"ProductManagement"},custom:""},{default:t(({navigate:n,isActive:m})=>[s("div",{class:V([{"active-link":m},"menu"]),role:"link",onClick:n},[o(p,{class:"icon",icon:"menu-request",size:"32"}),o(p,{class:"icon-active",icon:"menu-request-active",size:"32"}),de],10,_e)]),_:1})])}const pe=D(ne,[["render",ue],["__scopeId","data-v-8cfebf76"]]),me=s("p",{class:"mr-6 cursor-pointer select-none text-hyperlink"},"@2023 quanna.shop",-1),xe=B({__name:"TheLayout",setup(c){P(),z();const a=y(!0);return M(async()=>{await G().getListAssetCategory(),a.value=!1}),(i,p)=>{const n=K,m=pe,l=r("el-aside"),e=se,w=r("el-header"),h=r("router-view"),f=r("el-main"),b=r("el-footer"),g=r("el-container");return d(a)?(u(),k(n,{key:0})):(u(),k(g,{key:1,class:"h-screen"},{default:t(()=>[o(l,{class:"sidebar w-20"},{default:t(()=>[o(m)]),_:1}),o(g,null,{default:t(()=>[o(w,{class:"h-[70px] border-b border-solid border-[#d2d0ce] px-6"},{default:t(()=>[o(e)]),_:1}),o(f,{class:"bg-[#f6f8fc] pt-6 pr-6 pl-6 pb-0"},{default:t(()=>[o(h)]),_:1}),o(b,{class:"flex items-center border-t border-solid border-[#d2d0ce] px-6 text-sm"},{default:t(()=>[me]),_:1})]),_:1})]),_:1}))}}});export{xe as default};
