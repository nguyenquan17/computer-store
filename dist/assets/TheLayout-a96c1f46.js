import{_ as T}from"./BaseIcon-a742baad.js";import{T as q,r as y,U as u,i as B,V as E,S as I,W as S,f as N,P as L,g as M,u as U,j as d,o as p,c as g,a as o,L as b,l as m,b as e,w as n,R as j,k as w,E as A,X as v,p as P,m as F,y as H}from"./index-65c6b856.js";import{_ as D}from"./logo-c69ae777.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as O}from"./ThePageLoading-68b69f22.js";const R=q("auth",()=>{const l=y({userId:0,firstName:"",lastName:"",fullName:"",displayName:"",email:"",login2faEnabled:0,avatar:"",userType:"",phoneVerified:0,emailVerified:0,roles:[],roundsUserCanBuy:[],affiliationCode:""}),r=y({userId:u.get("user_id")||"",token:u.get("access_token")||"",refreshToken:""}),c=B(()=>!!r.value.token&&E(r.value.token)!=="");return{user:l,authUser:r,isLogin:c,login:async _=>{try{const s=await I.login(_);return console.log(s,"LOGIN"),r.value=s,S.defaults.headers.common.Authorization=`Bearer ${s.token}`,u.set("access_token",s.token,{expires:1}),u.set("user_id",s.userId,{expires:1}),Promise.resolve()}catch(s){return Promise.reject(s)}},logout:()=>{try{l.value={},r.value={},u.remove("access_token"),u.remove("user_id"),S.defaults.headers.common.Authorization=""}catch(_){console.log(_)}},getInfoUser:async()=>{const _=u.get("user_id"),s=await I.getInfo(_);console.log(s),l.value=s}}}),W={class:"flex items-center justify-between h-full"},X={class:"text-2xl leading-8 font-semibold"},J={class:"avatar"},K={class:"el-dropdown-link",style:{color:"#201f1e"}},Q=["src"],Y={class:"text-base font-semibold text-primary",style:{"padding-bottom":"4px"}},Z={key:0,class:"be-flex align-center ref-code"},ee={class:"text-sm",style:{color:"#5b616e","padding-right":"6px"}},oe=o("span",{class:"line"},null,-1),te=o("span",null,"Change password",-1),se=o("span",null,"Sign out",-1),ne=N({__name:"TheHeader",setup(l){const r=L();M();const c=R(),a=U(),t=B(()=>c.user),i=s=>{s==="logout"&&c.logout().then(()=>{a.push("/login")})},_=()=>{const s=document.createElement("input");s.value=t.value.affiliationCode,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),A.success("Copied")};return(s,$)=>{const k=T,h=d("el-dropdown-item"),x=d("el-dropdown-menu"),C=d("el-dropdown");return p(),g("div",W,[o("p",X,b(m(r).meta.title),1),o("div",J,[e(C,{trigger:"click",placement:"bottom-end","popper-class":"popper-avatar-header",onCommand:i},{dropdown:n(()=>[e(x,null,{default:n(()=>[e(h,{class:"item-above"},{default:n(()=>[o("span",Y,b(m(t).fullName),1),m(t).affiliationCode?(p(),g("div",Z,[o("span",ee," Referral code: "+b(m(t).affiliationCode),1),e(k,{icon:"copy",class:"cursor",onClick:_})])):j("",!0),oe]),_:1}),e(h,{class:"item-below",command:"change-pass"},{default:n(()=>[te]),_:1}),e(h,{class:"item-below",command:"logout"},{default:n(()=>[se]),_:1})]),_:1})]),default:n(()=>[o("span",K,[m(t).avatar?(p(),g("img",{key:1,src:m(t).avatar,class:"w-10 h-10 rounded-full object-cover"},null,8,Q)):(p(),w(k,{key:0,icon:"default-avatar",size:"40"}))])]),_:1})])])}}});const ae={},f=l=>(P("data-v-0e136d52"),l=l(),F(),l),ce={class:"overflow-y-auto h-full border-r border-[#ccc] border-solid"},ie=["onClick"],le=f(()=>o("img",{src:D,alt:"",class:"w-8"},null,-1)),re=f(()=>o("p",{class:"text-[10px] mt-[3px] leading-3 text-[#201f1e]"},"Home",-1)),de=[le,re],_e=["onClick"],ue=f(()=>o("p",{class:"text-[10px] mt-[3px] leading-3 text-[#201f1e]"},"Customer",-1)),me=["onClick"],pe=f(()=>o("p",{class:"text-[10px] mt-[3px] leading-3 text-[#201f1e]"},"Balance",-1)),fe=["onClick"],he=f(()=>o("p",{class:"text-[10px] mt-[3px] leading-3 text-[#201f1e]"},"Transaction",-1)),ve=["onClick"],ke=f(()=>o("p",{class:"text-[10px] mt-[3px] leading-3 text-[#201f1e]"},"Fee",-1)),ge=["onClick"],xe=f(()=>o("p",{class:"text-[10px] mt-[3px] leading-3 text-[#201f1e]"},"Request",-1));function Ce(l,r){const c=d("router-link"),a=T;return p(),g("div",ce,[e(c,{to:{name:"Customer",params:{type:"all"}},custom:""},{default:n(({navigate:t})=>[o("div",{class:"menu",role:"link",onClick:t},de,8,ie)]),_:1}),e(c,{to:{name:"CustomerMain"},custom:""},{default:n(({navigate:t,isActive:i})=>[o("div",{class:v(["menu",{"active-link":i}]),role:"link",onClick:t},[e(a,{icon:"menu-customer",size:"32",class:"icon"}),e(a,{icon:"menu-customer-active",size:"32",class:"icon-active"}),ue],10,_e)]),_:1}),e(c,{to:{name:"BalanceMain"},custom:""},{default:n(({navigate:t,isActive:i})=>[o("div",{class:v(["menu",{"active-link":i}]),role:"link",onClick:t},[e(a,{icon:"menu-balance",size:"32",class:"icon"}),e(a,{icon:"menu-balance-active",size:"32",class:"icon-active"}),pe],10,me)]),_:1}),e(c,{to:{name:"TransactionMain"},custom:""},{default:n(({navigate:t,isActive:i})=>[o("div",{class:v(["menu",{"active-link":i}]),role:"link",onClick:t},[e(a,{icon:"menu-transaction",size:"32",class:"icon"}),e(a,{icon:"menu-transaction-active",size:"32",class:"icon-active"}),he],10,fe)]),_:1}),e(c,{to:{name:"FeeMain"},custom:""},{default:n(({navigate:t,isActive:i})=>[o("div",{class:v(["menu",{"active-link":i}]),role:"link",onClick:t},[e(a,{icon:"menu-fee",size:"32",class:"icon"}),e(a,{icon:"menu-fee-active",size:"32",class:"icon-active"}),ke],10,ve)]),_:1}),e(c,{to:{name:"RequestMain"},custom:""},{default:n(({navigate:t,isActive:i})=>[o("div",{class:v(["menu",{"active-link":i}]),role:"link",onClick:t},[e(a,{icon:"menu-request",size:"32",class:"icon"}),e(a,{icon:"menu-request-active",size:"32",class:"icon-active"}),xe],10,ge)]),_:1})])}const be=G(ae,[["render",Ce],["__scopeId","data-v-0e136d52"]]),Se=N({__name:"TheLayout",setup(l){const r=M();R();const c=y(!0);H(async()=>{c.value=!1});const a=()=>{window.open(`${r.systemParams["system.token.terms"]}`)};return(t,i)=>{const _=O,s=be,$=d("el-aside"),k=ne,h=d("el-header"),x=d("router-view"),C=d("el-main"),V=d("el-footer"),z=d("el-container");return m(c)?(p(),w(_,{key:0})):(p(),w(z,{key:1,class:"h-screen"},{default:n(()=>[e($,{class:"sidebar w-20"},{default:n(()=>[e(s)]),_:1}),e(z,null,{default:n(()=>[e(h,{class:"h-[70px] border-b border-solid border-[#d2d0ce] px-6"},{default:n(()=>[e(k)]),_:1}),e(C,{class:"bg-[#f6f8fc] pt-6 pr-6 pl-6 pb-0"},{default:n(()=>[e(x)]),_:1}),e(V,{class:"flex items-center border-t border-solid border-[#d2d0ce] px-6 text-sm"},{default:n(()=>[o("p",{class:"mr-6 cursor-pointer select-none text-hyperlink",onClick:a},"Terms and Conditions")]),_:1})]),_:1})]),_:1}))}}});export{Se as default};
