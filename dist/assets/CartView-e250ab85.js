import{B as K}from"./BaseButton-33246e43.js";import{f as M,h as O,r as _,z as U,i as h,a0 as X,j as w,o as j,c as W,b as r,l as o,a as t,t as d,w as i,e as f,ab as x,a3 as y,p as Z,m as z}from"./index-5ca1291a.js";import{_ as H}from"./BaseTable.vue_vue_type_script_setup_true_lang-84a05ae3.js";import{u as $}from"./index-83bd10f7.js";import{u as g}from"./formatNumber-0d110035.js";import{u as E}from"./onlyNumber-646d122a.js";import{B as q}from"./BaseLoading-ca895cc9.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";import"./EmptyBlock.vue_vue_type_script_setup_true_lang-d633231f.js";import"./BaseIcon-aa053859.js";const p=m=>(Z("data-v-8fa449f7"),m=m(),z(),m),J={class:"landing-cart m-auto max-w-[1232px] px-8 py-8"},F={class:"mr-4 w-[66.67%]"},Y=p(()=>t("h1",{class:"mb-4 text-2xl font-bold"},"Giỏ hàng",-1)),tt={class:"mb-4 flex justify-between text-sm text-description"},et=p(()=>t("p",{class:"mr-4 cursor-pointer text-hyperlink"},"Xóa tất cả",-1)),at={class:"flex w-full"},ot={class:"block-left mr-4 w-[66.67%] rounded bg-white"},st={class:"flex items-center"},nt=["src"],rt={class:"ml-2 text-sm line-clamp-2"},lt={class:"text-sm font-medium"},it={class:"flex"},ct={class:"text-sm font-medium"},dt={class:"block-right max-h-[300px] w-[33.33%] rounded bg-white"},ut={class:"px-6 py-6"},pt=p(()=>t("div",{class:"mb-4 text-base font-bold"},"Thanh toán",-1)),mt={class:"mb-1 flex justify-between"},_t=p(()=>t("h3",null,"Tổng tạm tính",-1)),ht={class:"font-bold"},ft={class:"mb-12 flex justify-between"},gt=p(()=>t("h3",null,"Thành tiền",-1)),wt={class:"font-bold"},bt=M({__name:"CartView",setup(m){const s=$(),P=O(),l=_(!1),k=_([]),D=_(0);_([{productId:1,productName:"Laptop Asus Zenbook 14 OLED UX3402Z UX3402ZA-KM221W (14inch 90Hz/Intel Core i7 1260P/16GB/512GB SSD/Windows 11 Home/1.3kg)",productImageMain:"https://lh3.googleusercontent.com/rnIVOAhuK4DqaHOsT3vGKI_rdZTtfAbpW3klDiKfLfXDjrvjrBI7JLCOkNegNx5lXWU4uIkoBaeTIMQsrMngAPg0xDzvBSGz=w500-h500-rw",itemQuantity:3,productLatestPrice:2599e4,totalPricePerProduct:2599e3},{productId:2,productName:"Laptop Asus Zenbook 14 OLED UX3402Z UX3402ZA-KM221W (14inch 90Hz/Intel Core i7 1260P/16GB/512GB SSD/Windows 11 Home/1.3kg)",productImageMain:"https://lh3.googleusercontent.com/rnIVOAhuK4DqaHOsT3vGKI_rdZTtfAbpW3klDiKfLfXDjrvjrBI7JLCOkNegNx5lXWU4uIkoBaeTIMQsrMngAPg0xDzvBSGz=w500-h500-rw",itemQuantity:3,productLatestPrice:2599e4,totalPricePerProduct:2599e3}]);const L=()=>{x.push({name:"CheckoutView"})},B=e=>{k.value=e,s.setDataCartItem(e)},S=e=>{D.value=e.productId},T=async e=>{try{l.value=!0;const n={cartId:s.detailCart.cartId,productId:e.productId};await y.removeProductToCart(n),await s.getDetailCart(),l.value=!1}catch{l.value=!1}},N=async e=>{try{l.value=!0;const n={clientId:P.user.userId,productId:e.productId};await y.addProductToCart(n),await s.getDetailCart(),l.value=!1}catch{l.value=!1}},V=async()=>{try{l.value=!0,await s.getDetailCart(),l.value=!1}catch{l.value=!1}};U(async()=>{await s.getDetailCart()});const b=h(()=>{var e;return(e=s.detailCart)!=null&&e.cartItemDetailList?s.detailCart.cartItemDetailList.length:0}),A=h(()=>{var e;return(e=s.detailCart)!=null&&e.cartItemDetailList?s.detailCart.cartItemDetailList:[]}),v=h(()=>{var n;let e=0;return X((n=s.detailCart)==null?void 0:n.cartItemDetailList,c=>{e+=c.totalPricePerProduct}),e}),Q=h(()=>!s.detailCart);return(e,n)=>{const c=w("el-table-column"),C=w("el-button"),G=w("el-input"),I=K;return j(),W("div",J,[r(q,{fullscreen:!0,loading:o(l)},null,8,["loading"]),t("div",F,[Y,t("div",tt,[t("p",null,"Giỏ hàng "+d(o(b)?`(${o(b)})`:"(0)")+" sản phẩm",1),et])]),t("div",at,[t("div",ot,[r(H,{ref:"multipleTableRef",data:o(A),showPagination:!1,class:"table-cart",onSelectionChange:B,onRowClick:S},{default:i(()=>[r(c,{label:"",width:""},{default:i(a=>[t("div",st,[t("img",{src:a.row.productImage,alt:"",height:"80",width:"80"},null,8,nt),t("p",rt,d(a.row.productName),1)])]),_:1}),r(c,{align:"right",label:"Đơn giá",property:"productLatestPrice",width:"120"},{default:i(a=>[t("div",lt,d(o(g)(a.row.productLatestPrice))+"đ",1)]),_:1}),r(c,{align:"center",label:"Số lượng",property:"itemQuantity",width:"130"},{default:i(a=>[t("div",it,[r(C,{disabled:a.row.quantity<=1,class:"w-[36px] rounded-tr-none rounded-br-none",onClick:u=>T(a.row)},{default:i(()=>[f("- ")]),_:2},1032,["disabled","onClick"]),r(G,{modelValue:a.row.itemQuantity,"onUpdate:modelValue":u=>a.row.itemQuantity=u,class:"w-[42px] rounded-none",onBlur:V,onKeypress:u=>o(E)(u,a.row.itemQuantity)},null,8,["modelValue","onUpdate:modelValue","onKeypress"]),r(C,{class:"w-[36px] rounded-tl-none rounded-bl-none",onClick:u=>N(a.row)},{default:i(()=>[f("+ ")]),_:2},1032,["onClick"])])]),_:1}),r(c,{align:"right",label:"Thành tiền",property:"totalPricePerProduct","show-overflow-tooltip":"",width:"120"},{default:i(a=>[t("div",ct,d(o(g)(a.row.totalPricePerProduct))+"đ",1)]),_:1})]),_:1},8,["data"])]),t("div",dt,[t("div",ut,[pt,t("div",mt,[_t,t("span",ht,d(o(g)(o(v)))+"₫",1)]),t("div",ft,[gt,t("span",wt,d(o(g)(o(v)))+"₫",1)]),r(I,{disabled:o(Q),class:"mb-4",onClick:L},{default:i(()=>[f("Tiếp tục")]),_:1},8,["disabled"]),r(I,{type:"plain",onClick:n[0]||(n[0]=a=>o(x).push({name:"LandingPage"}))},{default:i(()=>[f("Trở lại mua hàng")]),_:1})])])])])}}});const St=R(bt,[["__scopeId","data-v-8fa449f7"]]);export{St as default};
