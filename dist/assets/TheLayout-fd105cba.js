import{_ as S}from"./BaseIcon-aa053859.js";import{Q as A,r as k,R as i,i as N,S as L,n as I,T as $,f as P,N as R,g as z,u as T,j as r,o as u,c as v,a as s,t as x,l as _,b as o,w as t,P as j,k as y,E as q,U as E,p as M,m as U,z as V}from"./index-5ca1291a.js";import{_ as H}from"./logo-c69ae777.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";import{u as G,_ as O}from"./useCategoryProduct-dad89d0a.js";const B=A("auth",()=>{const c=k({userId:0,email:"",fullName:"",phoneNumber:"",address:"",dob:""}),a=k({userId:i.get("user_id")||"",token:i.get("access_token")||"",refreshToken:""}),d=N(()=>!!a.value.token&&L(a.value.token)!=="");return{user:c,authUser:a,isLogin:d,login:async l=>{try{const e=await I.login(l);return console.log(e,"LOGIN"),e.status===500?(console.log("roi vao day"),Promise.resolve(e)):(a.value=e.data,$.defaults.headers.common.Authorization=`Bearer ${e.data.token}`,i.set("access_token",e.data.token,{expires:1}),i.set("user_id",e.data.userId,{expires:1}),Promise.resolve(e))}catch(e){return Promise.reject(e)}},logout:()=>{try{c.value={},a.value={},i.remove("access_token"),i.remove("user_id"),$.defaults.headers.common.Authorization=""}catch(l){console.log(l)}},getInfoUser:async()=>{const l=i.get("user_id"),e=await I.getInfo(l);c.value=e.data}}}),Q={class:"flex items-center justify-between h-full"},F={class:"text-2xl leading-8 font-semibold"},J={class:"avatar"},K={class:"el-dropdown-link",style:{color:"#201f1e"}},W=["src"],X={class:"text-base font-semibold text-primary",style:{"padding-bottom":"4px"}},Y={key:0,class:"be-flex align-center ref-code"},Z={class:"text-sm",style:{color:"#5b616e","padding-right":"6px"}},ee=s("span",{class:"line"},null,-1),oe=s("span",null,"Change password",-1),te=s("span",null,"Sign out",-1),se=P({__name:"TheHeader",setup(c){const a=R();z();const d=B(),p=T(),n=N(()=>d.user),m=e=>{e==="logout"&&d.logout().then(()=>{p.push("/login")})},l=()=>{const e=document.createElement("input");e.value=n.value.affiliationCode,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),q.success("Copied")};return(e,C)=>{const h=S,f=r("el-dropdown-item"),b=r("el-dropdown-menu"),g=r("el-dropdown");return u(),v("div",Q,[s("p",F,x(_(a).meta.title),1),s("div",J,[o(g,{trigger:"click",placement:"bottom-end","popper-class":"popper-avatar-header",onCommand:m},{dropdown:t(()=>[o(b,null,{default:t(()=>[o(f,{class:"item-above"},{default:t(()=>[s("span",X,x(_(n).fullName),1),_(n).affiliationCode?(u(),v("div",Y,[s("span",Z," Referral code: "+x(_(n).affiliationCode),1),o(h,{icon:"copy",class:"cursor",onClick:l})])):j("",!0),ee]),_:1}),o(f,{class:"item-below",command:"change-pass"},{default:t(()=>[oe]),_:1}),o(f,{class:"item-below",command:"logout"},{default:t(()=>[te]),_:1})]),_:1})]),default:t(()=>[s("span",K,[_(n).avatar?(u(),v("img",{key:1,src:_(n).avatar,class:"w-10 h-10 rounded-full object-cover"},null,8,W)):(u(),y(h,{key:0,icon:"default-avatar",size:"40"}))])]),_:1})])])}}});const ne={},w=c=>(M("data-v-8cfebf76"),c=c(),U(),c),ae={class:"h-full overflow-y-auto border-r border-solid border-[#ccc]"},ce=["onClick"],re=w(()=>s("img",{alt:"",class:"w-8",src:H},null,-1)),le=w(()=>s("p",{class:"mt-[3px] text-[10px] leading-3 text-[#201f1e]"},"Home",-1)),de=[re,le],ie=["onClick"],_e=w(()=>s("p",{class:"mt-[3px] text-[10px] leading-3 text-[#201f1e]"},"Product",-1));function ue(c,a){const d=r("router-link"),p=S;return u(),v("div",ae,[o(d,{to:{name:"ProductManagement"},custom:""},{default:t(({navigate:n})=>[s("div",{class:"menu",role:"link",onClick:n},de,8,ce)]),_:1}),o(d,{to:{name:"ProductManagement"},custom:""},{default:t(({navigate:n,isActive:m})=>[s("div",{class:E([{"active-link":m},"menu"]),role:"link",onClick:n},[o(p,{class:"icon",icon:"menu-request",size:"32"}),o(p,{class:"icon-active",icon:"menu-request-active",size:"32"}),_e],10,ie)]),_:1})])}const pe=D(ne,[["render",ue],["__scopeId","data-v-8cfebf76"]]),me=s("p",{class:"mr-6 cursor-pointer select-none text-hyperlink"},"@2023 quanna.shop",-1),xe=P({__name:"TheLayout",setup(c){z(),B();const a=k(!0);return V(async()=>{await G().getListAssetCategory(),a.value=!1}),(d,p)=>{const n=O,m=pe,l=r("el-aside"),e=se,C=r("el-header"),h=r("router-view"),f=r("el-main"),b=r("el-footer"),g=r("el-container");return _(a)?(u(),y(n,{key:0})):(u(),y(g,{key:1,class:"h-screen"},{default:t(()=>[o(l,{class:"sidebar w-20"},{default:t(()=>[o(m)]),_:1}),o(g,null,{default:t(()=>[o(C,{class:"h-[70px] border-b border-solid border-[#d2d0ce] px-6"},{default:t(()=>[o(e)]),_:1}),o(f,{class:"bg-[#f6f8fc] pt-6 pr-6 pl-6 pb-0"},{default:t(()=>[o(h)]),_:1}),o(b,{class:"flex items-center border-t border-solid border-[#d2d0ce] px-6 text-sm"},{default:t(()=>[me]),_:1})]),_:1})]),_:1}))}}});export{xe as default};
