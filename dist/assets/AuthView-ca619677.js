import{_ as L}from"./BaseIcon-a742baad.js";import{_ as D}from"./logo-c69ae777.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import{o as x,c as R,a as _,b as i,f as $,r as m,y as Q,N as Y,u as q,g as G,h as B,i as C,j as b,w as g,l as n,O as J,e as M,E as K,p as F,m as N,P as W,L as X,Q as Z,R as ee,S as A,k as O}from"./index-65c6b856.js";import{_ as T}from"./BaseButton-5e92c961.js";import"./JSEncrypt-a0a1d371.js";const te={},oe={class:"bg-white h-[68px] px-10 border-b border-solid border-[#dbdbdb] flex items-center justify-between"},re=_("img",{src:D,alt:""},null,-1),ne={class:"flex items-center"},ae=_("p",{class:"ml-1 text-sm"},"quanna@shop.com",-1);function se(r,e){const t=L;return x(),R("div",oe,[re,_("div",ne,[i(t,{icon:"mail",size:"20"}),ae])])}const ce=P(te,[["render",se]]);function I(){return I=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},I.apply(this,arguments)}var ie=function(){var e=!1,t=[],s=function(){if(!e){e=!0;for(var d=0,y=t.length;d<y;d++)t[d]()}},o=function(d){if(!e){t.push(d);return}d()},u={resolved:function(){return e},resolve:s,promise:{then:o}};return u},j=Object.prototype.hasOwnProperty;function le(){var r=ie();return{notify:function(){r.resolve()},wait:function(){return r.promise},render:function(t,s,o){this.wait().then(function(){o(window.grecaptcha.render(t,s))})},reset:function(t){typeof t>"u"||(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.reset(t)}))},execute:function(t){typeof t>"u"||(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.execute(t)}))},checkRecaptchaLoad:function(){j.call(window,"grecaptcha")&&j.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!r.resolved())throw new Error("ReCAPTCHA has not been loaded")}}}var E=le();typeof window<"u"&&(window.vueRecaptchaApiLoaded=E.notify);$({name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!0},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},emits:["render","verify","expired","error"],setup:function(e,t){var s=t.slots,o=t.emit,u=m(null),l=m(null),d=function(p){o("verify",p)},y=function(){o("expired")},S=function(){o("error")};return Q(function(){if(E.checkRecaptchaLoad(),e.loadRecaptchaScript&&!document.getElementById(e.recaptchaScriptId)){var a=document.createElement("script");a.id=e.recaptchaScriptId,a.src="https://"+e.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+e.language,a.async=!0,a.defer=!0,document.head.appendChild(a)}var p=I({},e,{callback:d,"expired-callback":y,"error-callback":S}),c=u.value,h=s.default?c.children[0]:c;E.render(h,p,function(f){l.value=f,o("render",f)})}),{root:u,widgetId:l,reset:function(){E.reset(l.value)},execute:function(){E.execute(l.value)}}},render:function(){var e=this.$slots.default,t;return typeof e=="function"?t=e():t=e,Y("div",{ref:"root"},t)}});const U=r=>(F("data-v-03a09fca"),r=r(),N(),r),de={class:"form-login w-[512px] bg-white m-auto rounded-lg shadow-lg py-[30px] px-6"},ue=U(()=>_("p",{class:"text-[30px] leading-[45px] font-semibold mb-5 text-center"},"Sign In",-1)),pe=U(()=>_("span",{class:"text-base",style:{color:"#201f1e","font-weight":"400","margin-left":"-2px"}}," Remember me ",-1)),me=$({__name:"FormLogin",setup(r){const e=q(),t=G(),s=B(),o=m({username:"",password:""}),u=m({username:[{required:!0,message:"Please enter your username",trigger:"blur"},{type:"email",message:"Please enter a correct username",trigger:"blur"}],password:[{required:!0,message:"Please enter password",trigger:"blur"}]});m("");const l=m(!1),d=m(!1);m(!1);const y=m(!1);C(()=>t.systemParams);const S=C(()=>!(o.value.username&&o.value.password)),a=async()=>{let p="";s.login({...o.value}).then(async()=>{await e.push({name:"Customer",params:{type:"all"}}),p="Logged in successfully",K.success({message:p,duration:5e3})})};return(p,c)=>{const h=b("el-input"),f=b("el-form-item"),v=L,w=b("el-checkbox"),k=T,z=b("el-form");return x(),R("div",de,[ue,i(z,{ref:"form-login","label-position":"top",class:"form-item",model:n(o),rules:n(u)},{default:g(()=>[i(f,{prop:"username"},{default:g(()=>[i(h,{modelValue:n(o).username,"onUpdate:modelValue":c[0]||(c[0]=V=>n(o).username=V),placeholder:"Email",type:"email"},null,8,["modelValue"])]),_:1}),i(f,{prop:"password",class:"input-password"},{default:g(()=>[i(h,{modelValue:n(o).password,"onUpdate:modelValue":c[2]||(c[2]=V=>n(o).password=V),class:"input-password",type:n(l)==!0?"text":"password",placeholder:"Password"},{append:g(()=>[_("div",{class:"icon-eye cursor-pointer",onClick:c[1]||(c[1]=V=>l.value=!n(l))},[i(v,{icon:n(l)==!0?"eye-off":"eye",size:"22"},null,8,["icon"])])]),_:1},8,["modelValue","type"])]),_:1}),i(w,{modelValue:n(d),"onUpdate:modelValue":c[3]||(c[3]=V=>J(d)?d.value=V:null)},{default:g(()=>[pe]),_:1},8,["modelValue"]),i(k,{class:"my-6",loading:n(y),disabled:n(S),onClick:a},{default:g(()=>[M(" Sign In ")]),_:1},8,["loading","disabled"])]),_:1},8,["model","rules"])])}}});const fe=P(me,[["__scopeId","data-v-03a09fca"]]),H=r=>(F("data-v-dfc40e75"),r=r(),N(),r),_e={class:"form-verify w-[512px] bg-white m-auto rounded-lg shadow-lg py-[30px] px-6"},he={class:"text-[30px] leading-[45px] font-semibold text-center color-[#201f1e]"},ge={class:"flex items-center"},ye={key:0,class:"mt-6 flex justify-center text-base text-[#605e5c]"},ve=H(()=>_("p",null,"Didn’t receive any verification code?  ",-1)),we=H(()=>_("p",{class:"text-hyperlink font-semibold cursor-pointer"},"Resend code",-1)),be=[ve,we],xe=$({__name:"FormVerify",setup(r){const e=W(),t=q(),s=B(),o=m({code:""}),u=m(!1),l=m({code:[{required:!0,message:"Please enter verification code",trigger:"blur"}]}),d=C(()=>{switch(e.params.type){case"email":return"Enter the 6-digit code we texted to your email";case"app":return"Enter the 6-digit code from your authenticator app";default:return"Enter the 6-digit code we texted to your phone number"}}),y=C(()=>`verify-${e.params.type}`),S=async()=>{try{u.value=!0;let a="";const p=e.query.pass,c=e.query.email,h=e.query.reason,f={email:c,password:p,verificationCode:o.value.code};h==="REQUEST_LOGIN"&&s.login({...f}).then(async()=>{const w=(await A.getInfo()).roles;w.length==1&&w.includes("INVESTOR")||w.length==0?(a="You don’t have permission to access",ElMessage.error({message:a,duration:5e3}),await s.logout(),t.push({name:"login"})):(a="Verification successful",ElMessage.error({message:a,duration:5e3}),t.push({name:"Customer",params:{type:"all"}})),u.value=!1}).catch(()=>{u.value=!1}),h==="VERIFY-SMS"&&(delete f.password,A.verifyCode("CODE",{...f,type:"SMS"}).then(v=>{s.setUserInfo(v),t.push({name:"Customer",params:{type:"all"}})}).catch(v=>{u.value=!1}))}catch{u.value=!1}};return(a,p)=>{const c=L,h=b("el-input"),f=b("el-form-item"),v=b("el-form"),w=T;return x(),R("div",_e,[_("p",he,X(n(d)),1),_("div",ge,[i(c,{icon:n(y),size:"80"},null,8,["icon"]),i(v,{ref:"form-verify","label-position":"top",model:n(o),rules:n(l),class:"w-full mt-[17px] ml-[10px]",onSubmit:Z(S,["prevent"])},{default:g(()=>[i(f,{prop:"code",label:"Enter 2-step authentication code:",class:"form-item-code"},{default:g(()=>[i(h,{modelValue:n(o).code,"onUpdate:modelValue":p[0]||(p[0]=k=>n(o).code=k),modelModifiers:{trim:!0},type:"text",maxlength:"6",placeholder:"Verification code"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules","onSubmit"])]),i(w,{loading:n(u),disabled:n(o).code.length!==6,onClick:S},{default:g(()=>[M("Submit")]),_:1},8,["loading","disabled"]),n(e).params.type!=="app"?(x(),R("div",ye,be)):ee("",!0)])}}});const Se=P(xe,[["__scopeId","data-v-dfc40e75"]]),Ve={class:"h-screen bg-[#f6f8fc]"},Ee={class:"content pt-10"},Pe=$({__name:"AuthView",setup(r){return(e,t)=>(x(),R("div",Ve,[i(ce),_("div",Ee,[e.$route.name==="LoginPage"?(x(),O(fe,{key:0})):(x(),O(Se,{key:1}))])]))}});export{Pe as default};
