import{u as k,d as st,f as at,l as nt,e as ot,a as it}from"./formatNumberInput-23a78a00.js";import{_ as F}from"./BaseIcon-fd0c2f2a.js";import{_ as rt}from"./MoreToken.vue_vue_type_style_index_0_lang-4b52a791.js";import{_ as ct,a as lt}from"./PopupFilterTransaction.vue_vue_type_style_index_0_lang-dc9506b8.js";import{u as I,a as R,b as U}from"./capitalizeLetter-2cf337ed.js";import{f as O,o as h,k as dt,w as A,e as ut,N as i,a as e,R as P,u as n,b as l,c as C,P as pt,G as mt,E as _t,M as ft,r as c,C as bt,j as vt,U as $,F as Tt,D as ht}from"./index-33323f4a.js";import{_ as xt}from"./_plugin-vue_export-helper-c27b6911.js";import"./BaseButton-83c1401e.js";import"./disableTime-86bbdf7c.js";const yt={class:"mb-2 pt-8 pb-4 bg-[#fff] text-center"},Ct=["src"],wt={class:"text-sm font-normal text-[#5b616e]"},gt={class:"bg-[#fff] p-6 mb-2"},Dt=e("p",{class:"text-base font-semibold"},"Transaction Details",-1),kt={class:"flex justify-between border-b py-[14px] border-solid border-[#dbdbdb]"},At=e("p",{class:"text-sm font-normal text-[#5b616e]"},"Transaction ID",-1),St={class:"flex text-base text-[#0a0b0d]"},Et={class:"flex justify-between border-b py-[14px] border-solid border-[#dbdbdb]"},Nt=e("p",{class:"text-sm font-normal text-[#5b616e]"},"Date",-1),Bt={class:"flex text-base text-[#0a0b0d]"},It={class:"flex justify-between border-b py-[14px] border-solid border-[#dbdbdb]"},Rt=e("p",{class:"text-sm font-normal text-[#5b616e]"},"To",-1),Pt={class:"flex text-base text-[#0a0b0d]"},$t={class:"flex justify-between py-[14px]"},Ft=e("p",{class:"text-sm font-normal text-[#5b616e]"},"Status",-1),Ut={class:"flex text-base text-[#0a0b0d]"},Ot={class:"bg-[#fff] p-6"},Lt=e("p",{class:"text-base font-semibold"},"Customer Info",-1),Mt={class:"flex justify-between border-b py-[14px] border-solid border-[#dbdbdb]"},jt=e("p",{class:"text-sm font-normal text-[#5b616e]"},"Full name",-1),Ht={class:"flex text-base text-[#0a0b0d]"},Wt={class:"flex justify-between border-b py-[14px] border-solid border-[#dbdbdb]"},zt=e("p",{class:"text-sm font-normal text-[#5b616e]"},"Phone number",-1),Gt={class:"flex text-base text-[#0a0b0d]"},Vt={key:0},qt={class:"flex justify-between py-[14px]"},Yt=e("p",{class:"text-sm font-normal text-[#5b616e]"},"Email",-1),Kt={class:"flex text-base text-[#0a0b0d]"},Jt=O({__name:"PopupDetailTransaction",props:{detailTransaction:{default:()=>({})}},setup(o){const v=a=>a?a.indexOf("+")!==-1?"text-[#129961]":"text-[#cf202f]":"",x=a=>a==="PENDING"?"status status-pending":a==="FAILED"?"status status-error":a==="PROCESSING"?"status status-warning":a==="REJECTED"?"status status-rejected":"status status-success",w=(a,s)=>{if(a&&s){if(s==="PENDING"||s==="PROCESSING"){if(a.split("_").includes("BONUS"))return"https://s3.cloud.cmctelecom.vn/bework-production/task/district/1/2023/4/7/15344_814738761_1680838607456.png";if(a.split("_").includes("WITHDRAW")||a.split("_").includes("PLACE"))return"https://s3.cloud.cmctelecom.vn/bework-production/task/district/1/2023/4/7/15344_1068752010_1680838604125.png";if(a.split("_").includes("TRANSFER")||a.split("_").includes("BUY"))return"https://s3.cloud.cmctelecom.vn/bework-production/task/district/1/2023/4/7/15344_1951104486_1680838605112.png";if(a.split("_").includes("DEPOSIT")||a.split("_").includes("WIN"))return"https://s3.cloud.cmctelecom.vn/bework-production/task/district/1/2023/4/7/15344_1029639176_1680838605884.png"}if(s==="SUCCESS"){if(a.split("_").includes("BONUS"))return"https://s3.cloud.cmctelecom.vn/bework-production/task/district/1/2023/4/7/15344_888851594_1680836903973.png";if(a.split("_").includes("WITHDRAW")||a.split("_").includes("PLACE"))return"https://s3.cloud.cmctelecom.vn/bework-production/task/district/1/2023/4/7/15344_938716523_1680838353894.png";if(a.split("_").includes("TRANSFER")||a.split("_").includes("BUY"))return"https://s3.cloud.cmctelecom.vn/bework-production/task/district/1/2023/4/7/15344_207145455_1680837707458.png";if(a.split("_").includes("DEPOSIT")||a.split("_").includes("WIN"))return"https://s3.cloud.cmctelecom.vn/bework-production/task/district/1/2023/4/7/15344_1687546300_1680837629094.png"}}};return(a,s)=>{const y=F,d=at;return h(),dt(d,{name:"popup-detail-transaction",width:"480px",class:"popup-detail-transaction","is-show-footer":!1},{title:A(()=>{var _;return[ut(i((_=o.detailTransaction.transactionType)==null?void 0:_.replaceAll("_"," "))+" "+i(o.detailTransaction.currency),1)]}),default:A(()=>[e("div",null,[e("div",yt,[e("img",{class:"mb-6 mx-auto",src:w(o.detailTransaction.transactionType,o.detailTransaction.status),width:"64",height:"64"},null,8,Ct),e("p",{class:P(["text-[20px] leading-6 font-semibold",v(o.detailTransaction.amountDisplay)])},i(o.detailTransaction.amountDisplay),3),e("p",wt,"~$"+i(n(k)(o.detailTransaction.amountToUsd,"USD")),1)])]),e("div",gt,[Dt,e("div",kt,[At,e("div",St,[e("span",null,i(n(I)(o.detailTransaction.transactionCode,10)),1),e("span",{class:"ml-2",onClick:s[0]||(s[0]=_=>n(R)(o.detailTransaction.transactionCode))},[l(y,{icon:"icon-copy",size:"24",color:"#A19F9D"})])])]),e("div",Et,[Nt,e("div",Bt,[e("span",null,i(n(st)(o.detailTransaction.transactionMillisecond)),1)])]),e("div",It,[Rt,e("div",Pt,[e("span",null,i(n(I)(o.detailTransaction.toAddress,10)),1),e("span",{class:"ml-2",onClick:s[1]||(s[1]=_=>n(R)(o.detailTransaction.toAddress))},[l(y,{icon:"icon-copy",size:"24",color:"#A19F9D"})])])]),e("div",$t,[Ft,e("div",Ut,[e("span",{class:P(x(o.detailTransaction.status))},i(n(U)(o.detailTransaction.status)),3)])])]),e("div",Ot,[Lt,e("div",Mt,[jt,e("div",Ht,[e("span",null,i(o.detailTransaction.fullName),1)])]),e("div",Wt,[zt,e("div",Gt,[o.detailTransaction.phoneCode?(h(),C("span",Vt,"("+i(o.detailTransaction.phoneCode)+") "+i(o.detailTransaction.phone),1)):pt("",!0)])]),e("div",qt,[Yt,e("div",Kt,[e("span",null,i(o.detailTransaction.email),1)])])])]),_:1})}}});const Qt={class:"shadow-md rounded bg-white mb-6"},Xt={class:"flex right-0 ml-auto"},Zt={class:"flex justify-between"},te={class:"text-[#5b616e] text-base"},ee={class:"my-2 text-[#0a0b0d] font-semibold"},se={class:"text-[24px] leading-6 break-all"},ae={class:"text-sm text-[#5b616e] break-all"},ne=O({__name:"TransactionView",setup(o){const v=mt(),x=_t(),w=ft(),a=c(!1),s=c({transactionType:"",status:"",fromTransactionDate:"",toTransactionDate:"",fromTransactionAmount:"",toTransactionAmount:"",search:"",orderBy:"1"}),y=c([{title:"MAGIC",value:"MAGIC"},{title:"ETH",value:"ETH"},{title:"BNB",value:"BNB"},{title:"USDT",value:"USDT"},{title:"BUSD",value:"BUSD"}]),d=c({page:1,limit:20,total:0}),_=c([{title:"Transaction date",value:"1"},{title:"Transaction amount",value:"2"},{title:"Status",value:"3"}]),S=c({}),E=c([]),g=c([]),m=c([]),f=c("MAGIC"),L=c(null),N=t=>{const r=document.querySelector(".carousel-transaction");r.scrollTo(r.scrollLeft+264*t,0)},M=t=>t==="BUY_TOKEN"?"Total Buy":t==="PLACE_BET"?"Total Bet":t==="WIN"?"Total Prize":t==="REF"?"Total Referral":`Total ${U(t)}`,j=t=>t==="DEPOSIT"?"icon-deposit":t==="BONUS"?"icon-bonus":t==="TRANSFER"?"icon-transfer":t==="WITHDRAW"?"icon-withdraw":t==="BUY_TOKEN"?"icon-buy-token":t==="WIN"?"icon-win":t==="PLACE_BET"?"icon-place-bet":t==="BURN"?"icon-burn":t==="COMMISSION"?"icon-commission":t==="REF"?"icon-referral":"icon-default",H=t=>{f.value=t.value,x.push({params:{currency:t.value}}),u()},W=t=>{f.value=t,x.push({params:{currency:t}}),u()},z=bt(()=>{let t=[];return nt.orderBy(m.value,["position","asc"]).forEach(T=>{let p=E.value.filter(D=>D.transactionType===T.typeName);t=[...t,...p]}),t});vt(async()=>{f.value=w.params.currency.toUpperCase(),await V(),G(),await u()});const G=()=>{s.value.transactionType||(s.value.transactionType=m.value[0].typeName)},V=async()=>{try{const t={module:"transaction"},r=await $.getListTransactionType(t);m.value=r}catch{m.value=[]}},u=async()=>{try{a.value=!0;const t={status:s.value.status,transactionType:s.value.transactionType,orderBy:s.value.orderBy,currency:f.value,fromDate:s.value.fromTransactionDate,toDate:s.value.toTransactionDate,fromAmount:s.value.fromTransactionAmount.replaceAll(",",""),toAmount:s.value.toTransactionAmount.replaceAll(",",""),search:s.value.search,...d.value},r=await $.getListTransaction("search",t);g.value=r.transactions.content,d.value.total=r.transactions.totalElements;const T=m.value.map(p=>p.typeName);E.value=r.summary.filter(p=>T.includes(p.transactionType)),a.value=!1}catch{a.value=!1,g.value=[]}},q=t=>{s.value.orderBy=t.value,u()},B=t=>{s.value.search=t,u()},Y=t=>{d.value.page=1,d.value.limit=t,u()},K=t=>{d.value.page=t,u()},J=t=>{S.value=t,v.setOpenPopup(!0,"popup-detail-transaction")},Q=()=>{d.value={...d.value,page:1},s.value={transactionType:m.value[0].typeName,status:"",fromTransactionDate:"",toTransactionDate:"",fromTransactionAmount:"",toTransactionAmount:"",search:"",orderBy:"1"}},X=()=>{Q(),v.setOpenPopup(!1,"popup-filter-transaction"),u()},Z=t=>{s.value.transactionType=t.value.transactionType,s.value.status=t.value.status,s.value.fromTransactionDate=t.value.fromTransactionDate,s.value.toTransactionDate=t.value.toTransactionDate,s.value.fromTransactionAmount=t.value.fromTransactionAmount,s.value.toTransactionAmount=t.value.toTransactionAmount,v.setOpenPopup(!1,"popup-filter-transaction"),u()};return(t,r)=>{const T=rt,p=F,D=ot,tt=it;return h(),C("div",null,[e("div",Qt,[l(D,{"list-tab":n(y),"tab-active":n(f),onClick:H},{"more-tab":A(()=>[l(T,{onSelect:W}),e("div",Xt,[e("div",{class:"btn-carousel cursor-pointer",onClick:r[0]||(r[0]=b=>N(-1))},[l(p,{icon:"icon-prev",size:"32"})]),e("div",{class:"btn-carousel cursor-pointer mr-3 ml-4",onClick:r[1]||(r[1]=b=>N(1))},[l(p,{icon:"icon-next",size:"32"})])])]),_:1},8,["list-tab","tab-active"]),e("div",{ref_key:"wrapCard",ref:L,class:"p-6 flex overflow-hidden carousel-transaction"},[(h(!0),C(Tt,null,ht(n(z),(b,et)=>(h(),C("div",{key:et,class:"p-4 border border-solid border-[#dbdbdb] mr-6 rounded-lg min-w-[240px]"},[e("div",Zt,[e("span",te,i(M(b.transactionType)),1),e("div",null,[l(p,{icon:j(b.transactionType),size:"24"},null,8,["icon"])])]),e("div",ee,[e("p",se,i(n(k)(b.totalAmount,n(f))),1)]),e("div",null,[e("span",ae,"~$"+i(n(k)(b.totalAmountUsd,"USD")),1)])]))),128))],512),l(tt,{ref:"refFilter","list-sort":n(_),popper:!1,"width-dropdown":"230","popup-name":"popup-filter-transaction","sort-active":n(s).orderBy,onSort:q,onSearch:B},null,8,["list-sort","sort-active"]),l(ct,{class:"px-6","is-loading":n(a),data:n(g),query:n(d),onLimitChange:Y,onPageChange:K,onRowClick:J},null,8,["is-loading","data","query"])]),l(lt,{"transaction-type":n(s).transactionType,"list-transaction-type":n(m),"is-show-footer":!0,onReset:X,onApply:Z,onSearch:B},null,8,["transaction-type","list-transaction-type"]),l(Jt,{"detail-transaction":n(S)},null,8,["detail-transaction"])])}}});const _e=xt(ne,[["__scopeId","data-v-b92776cd"]]);export{_e as default};
