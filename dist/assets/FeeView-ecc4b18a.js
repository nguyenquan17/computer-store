import{b as P,c as I,u as F,d as q,_ as rt,e as ct,a as dt}from"./formatNumberInput-6faaccd2.js";import{_ as M}from"./BaseIcon-a742baad.js";import{_ as ut}from"./MoreToken.vue_vue_type_style_index_0_lang-8d368dde.js";import{_ as W}from"./BasePopup.vue_vue_type_script_setup_true_lang-22ca9463.js";import{u as G}from"./disableTime-86bbdf7c.js";import{f as R,r as b,j as g,o as T,k as N,w as m,e as K,a as t,b as c,l as e,c as k,G as j,H,L as u,X as S,i as mt,g as pt,u as ft,P as _t,y as bt,Y as Tt,a2 as xt}from"./index-65c6b856.js";import{u as E,a as B,b as z}from"./capitalizeLetter-3d39dd71.js";import{_ as vt}from"./_plugin-vue_export-helper-c27b6911.js";import"./BaseButton-5e92c961.js";import"./formatNumber-a2d8cd5e.js";const yt={class:"flex justify-between"},ht={class:"flex justify-between"},wt={class:"flex justify-between"},Dt=t("div",{class:"text-base text-[#0a0b0d]"},"$",-1),gt=t("div",{class:"text-base text-[#0a0b0d]"},"$",-1),Ft={class:"flex justify-between"},kt=t("div",{class:"text-base text-[#0a0b0d]"},"$",-1),At=t("div",{class:"text-base text-[#0a0b0d]"},"$",-1),Ct=R({__name:"PopupFilterFee",props:{listTransactionType:{default:()=>[]},transactionType:{default:""},status:{default:""}},emits:["reset","apply"],setup(d,{emit:_}){const x=d,r=b({fromTransactionDate:"",toTransactionDate:"",fromTransactionAmount:"",toTransactionAmount:"",fromTransactionFee:"",toTransactionFee:"",status:"",transactionType:""}),i=()=>{r.value.transactionType=x.transactionType,r.value.status=x.status},a=b([{title:"Pending",value:"PENDING"},{title:"Processing",value:"PROCESSING"},{title:"Success",value:"SUCCESS"}]),y=()=>{r.value={transactionType:"",status:"",fromTransactionDate:"",toTransactionDate:"",fromTransactionAmount:"",toTransactionAmount:"",fromTransactionFee:"",toTransactionFee:""}},f=()=>{y(),_("reset")},p=()=>{_("apply",r)};return(w,o)=>{const D=g("el-option"),v=g("el-select"),n=g("el-form-item"),$=g("el-date-picker"),A=g("el-input"),L=g("el-form"),O=W;return T(),N(O,{name:"popup-filter-fee",width:"600px",class:"popup-filter-fee","is-show-footer":!1,onOpen:i},{title:m(()=>[K("Filter")]),footer:m(()=>[t("button",{class:"border border-solid border-[#d2d0ce] w-[120px] rounded-lg mr-[15px] font-normal text-sm h-10 text-[#3b3a39]",onClick:f}," Reset "),t("button",{class:"border border-solid border-[#d2d0ce] w-[120px] rounded-lg font-normal text-sm h-10 text-[#fff] bg-[#0151fc]",onClick:p}," Continue ")]),default:m(()=>[c(L,{"label-position":"top"},{default:m(()=>[t("div",yt,[c(n,{class:"flex-1 mr-10",label:"Transaction Type"},{default:m(()=>[c(v,{modelValue:e(r).transactionType,"onUpdate:modelValue":o[0]||(o[0]=s=>e(r).transactionType=s),class:"w-full"},{default:m(()=>[(T(!0),k(j,null,H(x.listTransactionType,(s,U)=>(T(),N(D,{key:U,label:s.displayName,value:s.typeName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),c(n,{class:"flex-1",label:"Status"},{default:m(()=>[c(v,{modelValue:e(r).status,"onUpdate:modelValue":o[1]||(o[1]=s=>e(r).status=s),clearable:!0,class:"w-full"},{default:m(()=>[(T(!0),k(j,null,H(e(a),(s,U)=>(T(),N(D,{key:U,label:s.title,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),t("div",ht,[c(n,{class:"flex-1 mr-10",label:"Transaction Date"},{default:m(()=>[c($,{modelValue:e(r).fromTransactionDate,"onUpdate:modelValue":o[2]||(o[2]=s=>e(r).fromTransactionDate=s),class:"!w-full",format:"MM/DD/YYYY","value-format":"x",placeholder:"From date",type:"date","disabled-date":s=>e(G)(s,"from",e(r).toTransactionDate)},null,8,["modelValue","disabled-date"])]),_:1}),c(n,{class:"flex-1 hide-label",label:"1"},{default:m(()=>[c($,{modelValue:e(r).toTransactionDate,"onUpdate:modelValue":o[3]||(o[3]=s=>e(r).toTransactionDate=s),class:"!w-full",format:"MM/DD/YYYY","value-format":"x",placeholder:"To date",type:"date","disabled-date":s=>e(G)(s,"to",e(r).fromTransactionDate)},null,8,["modelValue","disabled-date"])]),_:1})]),t("div",wt,[c(n,{class:"flex-1 mr-10",label:"Transaction Amount"},{default:m(()=>[c(A,{modelValue:e(r).fromTransactionAmount,"onUpdate:modelValue":o[4]||(o[4]=s=>e(r).fromTransactionAmount=s),placeholder:"From amount",onKeypress:o[5]||(o[5]=s=>e(P)(s,e(r).fromTransactionAmount)),onKeyup:o[6]||(o[6]=s=>e(I)(s))},{prefix:m(()=>[Dt]),_:1},8,["modelValue"])]),_:1}),c(n,{class:"flex-1 hide-label",label:"1"},{default:m(()=>[c(A,{modelValue:e(r).toTransactionAmount,"onUpdate:modelValue":o[7]||(o[7]=s=>e(r).toTransactionAmount=s),placeholder:"To amount",onKeypress:o[8]||(o[8]=s=>e(P)(s,e(r).toTransactionAmount)),onKeyup:o[9]||(o[9]=s=>e(I)(s))},{prefix:m(()=>[gt]),_:1},8,["modelValue"])]),_:1})]),t("div",Ft,[c(n,{class:"flex-1 mr-10",label:"Transaction Fee"},{default:m(()=>[c(A,{modelValue:e(r).fromTransactionFee,"onUpdate:modelValue":o[10]||(o[10]=s=>e(r).fromTransactionFee=s),placeholder:"From fee",onKeypress:o[11]||(o[11]=s=>e(P)(s,e(r).fromTransactionFee)),onKeyup:o[12]||(o[12]=s=>e(I)(s))},{prefix:m(()=>[kt]),_:1},8,["modelValue"])]),_:1}),c(n,{class:"flex-1 hide-label",label:"1"},{default:m(()=>[c(A,{modelValue:e(r).toTransactionFee,"onUpdate:modelValue":o[13]||(o[13]=s=>e(r).toTransactionFee=s),placeholder:"To fee",onKeypress:o[14]||(o[14]=s=>e(P)(s,e(r).toTransactionFee)),onKeyup:o[15]||(o[15]=s=>e(I)(s))},{prefix:m(()=>[At]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})}}});const St={class:"mb-2 pt-8 pb-4 bg-[#fff] text-center"},$t=["src"],Ut={class:"text-sm font-normal text-[#5b616e]"},Vt={class:"bg-[#fff] p-6 mb-2"},Nt=t("p",{class:"text-base font-semibold"},"Transaction Details",-1),Et={class:"flex justify-between border-b py-[14px] border-solid border-[#dbdbdb]"},Pt=t("p",{class:"text-sm font-normal text-[#5b616e]"},"Transaction ID",-1),It={class:"flex text-base text-[#0a0b0d]"},Bt={class:"flex justify-between border-b py-[14px] border-solid border-[#dbdbdb]"},Rt=t("p",{class:"text-sm font-normal text-[#5b616e]"},"Date",-1),Lt={class:"flex text-base text-[#0a0b0d]"},Ot={class:"flex justify-between border-b py-[14px] border-solid border-[#dbdbdb]"},jt=t("p",{class:"text-sm font-normal text-[#5b616e]"},"From",-1),Ht={class:"flex text-base text-[#0a0b0d]"},Mt={class:"flex justify-between border-b py-[14px] border-solid border-[#dbdbdb]"},Yt=t("p",{class:"text-sm font-normal text-[#5b616e]"},"To",-1),Gt={class:"flex text-base text-[#0a0b0d]"},qt={class:"flex justify-between border-b py-[14px] border-solid border-[#dbdbdb]"},Wt=t("p",{class:"text-sm font-normal text-[#5b616e]"},"Fees",-1),Kt={class:"flex text-sm"},zt={class:"text-[#5b616e]"},Jt={class:"flex justify-between py-[14px]"},Xt=t("p",{class:"text-sm font-normal text-[#5b616e]"},"Status",-1),Qt={class:"flex text-base text-[#0a0b0d]"},Zt={class:"bg-[#fff] p-6"},te=t("p",{class:"text-base font-semibold"},"Customer Info",-1),ee={class:"flex justify-between border-b py-[14px] border-solid border-[#dbdbdb]"},ae=t("p",{class:"text-sm font-normal text-[#5b616e]"},"Full name",-1),se={class:"flex text-base text-[#0a0b0d]"},oe=t("div",{class:"flex justify-between border-b py-[14px] border-solid border-[#dbdbdb]"},[t("p",{class:"text-sm font-normal text-[#5b616e]"},"Phone number"),t("div",{class:"flex text-base text-[#0a0b0d]"})],-1),ne={class:"flex justify-between py-[14px]"},le=t("p",{class:"text-sm font-normal text-[#5b616e]"},"Email",-1),ie={class:"flex text-base text-[#0a0b0d]"},re=R({__name:"PopupDetailFee",props:{detailTransaction:{default:()=>({})}},setup(d){const _=i=>i?i.indexOf("+")!==-1?"text-[#129961]":"text-[#cf202f]":"",x=i=>i==="PENDING"?"status status-pending":i==="FAILED"?"status status-error":i==="PROCESSING"?"status status-warning":i==="REJECTED"?"status status-rejected":"status status-success",r=(i,a)=>{if(i&&a){if(a==="PENDING"||a==="PROCESSING"){if(i.split("_").includes("BONUS"))return"https://s3.cloud.cmctelecom.vn/bework-production/task/district/1/2023/4/7/15344_814738761_1680838607456.png";if(i.split("_").includes("WITHDRAW")||i.split("_").includes("PLACE"))return"https://s3.cloud.cmctelecom.vn/bework-production/task/district/1/2023/4/7/15344_1068752010_1680838604125.png";if(i.split("_").includes("TRANSFER")||i.split("_").includes("BUY"))return"https://s3.cloud.cmctelecom.vn/bework-production/task/district/1/2023/4/7/15344_1951104486_1680838605112.png";if(i.split("_").includes("DEPOSIT")||i.split("_").includes("WIN"))return"https://s3.cloud.cmctelecom.vn/bework-production/task/district/1/2023/4/7/15344_1029639176_1680838605884.png"}if(a==="SUCCESS"){if(i.split("_").includes("BONUS"))return"https://s3.cloud.cmctelecom.vn/bework-production/task/district/1/2023/4/7/15344_888851594_1680836903973.png";if(i.split("_").includes("WITHDRAW")||i.split("_").includes("PLACE"))return"https://s3.cloud.cmctelecom.vn/bework-production/task/district/1/2023/4/7/15344_938716523_1680838353894.png";if(i.split("_").includes("TRANSFER")||i.split("_").includes("BUY"))return"https://s3.cloud.cmctelecom.vn/bework-production/task/district/1/2023/4/7/15344_207145455_1680837707458.png";if(i.split("_").includes("DEPOSIT")||i.split("_").includes("WIN"))return"https://s3.cloud.cmctelecom.vn/bework-production/task/district/1/2023/4/7/15344_1687546300_1680837629094.png"}}};return(i,a)=>{const y=M,f=W;return T(),N(f,{name:"popup-detail-fee",width:"480px",class:"popup-detail-fee","is-show-footer":!1},{title:m(()=>{var p;return[K(u((p=d.detailTransaction.transactionType)==null?void 0:p.replaceAll("_"," "))+" "+u(d.detailTransaction.currency),1)]}),default:m(()=>[t("div",null,[t("div",St,[t("img",{class:"mb-6 mx-auto",src:r(d.detailTransaction.transactionType,d.detailTransaction.status),width:"64",height:"64"},null,8,$t),t("p",{class:S(["text-[20px] leading-6 font-semibold",_(d.detailTransaction.amountDisplay)])},u(d.detailTransaction.amountDisplay),3),t("p",Ut,"~$"+u(e(F)(d.detailTransaction.amountToUsd,"USD")),1)])]),t("div",Vt,[Nt,t("div",Et,[Pt,t("div",It,[t("span",null,u(e(E)(d.detailTransaction.transactionHash,10)),1),t("span",{class:"ml-2",onClick:a[0]||(a[0]=p=>e(B)(d.detailTransaction.transactionHash))},[c(y,{icon:"icon-copy",size:"24",color:"#A19F9D"})])])]),t("div",Bt,[Rt,t("div",Lt,[t("span",null,u(e(q)(d.detailTransaction.transactionDate)),1)])]),t("div",Ot,[jt,t("div",Ht,[t("span",null,u(e(E)(d.detailTransaction.fromAddress,10)),1),t("span",{class:"ml-2",onClick:a[1]||(a[1]=p=>e(B)(d.detailTransaction.fromAddress))},[c(y,{icon:"icon-copy",size:"24",color:"#A19F9D"})])])]),t("div",Mt,[Yt,t("div",Gt,[t("span",null,u(e(E)(d.detailTransaction.toAddress,10)),1),t("span",{class:"ml-2",onClick:a[2]||(a[2]=p=>e(B)(d.detailTransaction.toAddress))},[c(y,{icon:"icon-copy",size:"24",color:"#A19F9D"})])])]),t("div",qt,[Wt,t("div",Kt,[t("span",null,[t("span",{class:S(_(d.detailTransaction.totalFeeDisplay))},u(d.detailTransaction.totalFeeDisplay),3),t("span",zt," (~$"+u(e(F)(d.detailTransaction.totalFeeToUsd,"USD"))+")",1)])])]),t("div",Jt,[Xt,t("div",Qt,[t("span",{class:S(x(d.detailTransaction.status))},u(e(z)(d.detailTransaction.status)),3)])])]),t("div",Zt,[te,t("div",ee,[ae,t("div",se,[t("span",null,u(d.detailTransaction.fullName),1)])]),oe,t("div",ne,[le,t("div",ie,[t("span",null,u(d.detailTransaction.email),1)])])])]),_:1})}}});const ce={class:""},de={class:"flex"},ue={key:0,class:"mr-4 w-[170px]"},me={key:1,class:"mr-4 w-[210px]"},pe=["onClick"],fe={class:"text-sm text-[#5b616e]"},_e={class:"text-sm text-[#5b616e]"},be={class:"text-sm font-normal text-[#5b616e]"},Te={class:"text-sm text-[#5b616e]"},xe={class:"text-sm text-[#5b616e]"},ve=R({__name:"TableFee",props:{data:{default:()=>[]},query:{default:()=>({page:1,limit:20,total:0})},isLoading:{type:Boolean,default:()=>!1}},emits:["page-change","limit-change","row-click"],setup(d,{emit:_}){const x=d,r=b(!1),i=mt(()=>window.innerWidth<1400),a=p=>p?p.indexOf("+")!==-1?"text-[#129961]":"text-[#cf202f]":"",y=p=>(x.query.page-1)*x.query.limit+p+1,f=p=>{if(r.value){r.value=!1;return}_("row-click",p)};return(p,w)=>{const o=g("el-table-column"),D=M,v=rt;return T(),N(v,{loading:d.isLoading,data:d.data,query:d.query,label:d.data.length>1?"transactions":"transaction",onLimitChange:w[0]||(w[0]=n=>_("limit-change",n)),onPageChange:w[1]||(w[1]=n=>_("page-change",n)),onRowClick:f},{default:m(()=>[c(o,{key:"1",label:"#",type:"index",index:y,align:"center",width:"80"}),c(o,{key:"2",label:"transaction id","class-name":"column-tx",width:e(i)?260:320,"min-width":"260"},{default:m(n=>[t("div",ce,[t("div",de,[e(i)?(T(),k("span",ue,u(e(E)(n.row.transactionHash,8)),1)):(T(),k("span",me,u(e(E)(n.row.transactionHash,10)),1)),t("span",{onClick:$=>(e(B)(n.row.transactionHash),r.value=!0)},[c(D,{icon:"icon-copy",size:"24",color:"#A19F9D"})],8,pe)]),t("p",fe,u(e(q)(n.row.transactionMillisecond)),1)])]),_:1},8,["width"]),c(o,{key:"3",label:"customer",width:e(i)?180:220},{default:m(n=>[t("span",null,u(n.row.fullName),1),t("p",_e,u(n.row.email),1)]),_:1},8,["width"]),c(o,{key:"6",label:"amount",align:"right"},{default:m(n=>[t("div",null,[t("p",{class:S(a(n.row.amountDisplay))},u(n.row.amountDisplay),3),t("p",be,"~$"+u(e(F)(n.row.amountToUsd,"USD")),1)])]),_:1}),c(o,{key:"7",label:"extra fee",align:"right",width:e(i)?200:""},{default:m(n=>[t("span",{class:S(a(n.row.extraFeeDisplay))},u(n.row.extraFeeDisplay),3),t("p",Te,"~$"+u(e(F)(n.row.extraFeeToUsd,"USD")),1)]),_:1},8,["width"]),c(o,{key:"8",label:"total fee",align:"right",width:e(i)?200:""},{default:m(n=>[t("div",null,[t("p",{class:S(a(n.row.totalFeeDisplay))},u(n.row.totalFeeDisplay),3),t("p",xe,"~$"+u(e(F)(n.row.totalFeeToUsd,"USD")),1)])]),_:1},8,["width"])]),_:1},8,["loading","data","query","label"])}}}),ye={class:"shadow-md rounded bg-white mb-6"},he={ref:"wrapCard",class:"p-6 flex overflow-hidden carousel-transaction"},we={class:"flex justify-between"},De={class:"text-[#5b616e] text-base"},ge={class:"my-2 text-[#0a0b0d] font-semibold break-all"},Fe={class:"text-[24px] leading-6"},ke={class:"text-xs font-normal ml-1"},Ae={class:"text-sm text-[#5b616e] break-all"},Ce=R({__name:"FeeView",setup(d){const _=pt(),x=ft(),r=_t(),i=b(!1),a=b({transactionType:"",status:"",fromTransactionDate:"",toTransactionDate:"",fromTransactionAmount:"",toTransactionAmount:"",fromTransactionFee:"",toTransactionFee:"",search:"",orderBy:"1"}),y=b([{title:"MAGIC",value:"MAGIC"},{title:"ETH",value:"ETH"},{title:"BNB",value:"BNB"},{title:"USDT",value:"USDT"},{title:"BUSD",value:"BUSD"}]),f=b({page:1,limit:20,total:0}),p=b([{title:"Transaction date",value:"1"},{title:"Transaction amount",value:"2"},{title:"Status",value:"3"}]),w=b({}),o=b([]),D=b([]),v=b([]),n=b("MAGIC"),$=l=>l==="TOTAL"?"Total Fee":`Total Fee ${z(l)}`,A=l=>l==="DEPOSIT"?"icon-deposit":l==="WITHDRAW"?"icon-withdraw":l==="TOTAL"?"icon-total-fee":"icon-default",L=l=>{n.value=l.value,x.push({params:{currency:l.value}}),h()},O=l=>{n.value=l,x.push({params:{currency:l}}),h()};bt(async()=>{n.value=r.params.currency.toUpperCase(),await U(),s(),await h()});const s=()=>{a.value.transactionType||(a.value.transactionType=v.value[0].typeName),a.value.status||(a.value.status="SUCCESS")},U=async()=>{try{const l={module:"fee"},C=await Tt.getListTransactionType(l);v.value=C}catch{v.value=[]}},h=async()=>{try{i.value=!0;const l={status:a.value.status,transactionType:a.value.transactionType,orderBy:a.value.orderBy,currency:n.value,fromDate:a.value.fromTransactionDate,toDate:a.value.toTransactionDate,fromAmount:a.value.fromTransactionAmount.replaceAll(",",""),toAmount:a.value.toTransactionAmount.replaceAll(",",""),fromTransactionFee:a.value.fromTransactionFee.replaceAll(",",""),toTransactionFee:a.value.toTransactionFee.replaceAll(",",""),keywordString:a.value.search,...f.value},C=await xt.getListFee(l);D.value=C.transactions.content,f.value.total=C.transactions.totalElements,o.value=C.summary,i.value=!1}catch{i.value=!1,D.value=[]}},J=l=>{a.value.orderBy=l.value,h()},Y=l=>{a.value.search=l,h()},X=l=>{f.value.page=1,f.value.limit=l,h()},Q=l=>{f.value.page=l,h()},Z=l=>{w.value=l,_.setOpenPopup(!0,"popup-detail-fee")},tt=()=>{f.value={...f.value,page:1},a.value={transactionType:v.value[0].typeName,status:"SUCCESS",fromTransactionDate:"",toTransactionDate:"",fromTransactionAmount:"",toTransactionAmount:"",fromTransactionFee:"",toTransactionFee:"",search:"",orderBy:"1"}},et=()=>{tt(),_.setOpenPopup(!1,"popup-filter-fee"),h()},at=l=>{a.value.transactionType=l.value.transactionType,a.value.status=l.value.status,a.value.fromTransactionDate=l.value.fromTransactionDate,a.value.toTransactionDate=l.value.toTransactionDate,a.value.fromTransactionAmount=l.value.fromTransactionAmount,a.value.toTransactionAmount=l.value.toTransactionAmount,a.value.fromTransactionFee=l.value.fromTransactionFee,a.value.toTransactionFee=l.value.toTransactionFee,_.setOpenPopup(!1,"popup-filter-fee"),h()};return(l,C)=>{const st=ut,ot=ct,nt=M,lt=dt;return T(),k("div",null,[t("div",ye,[c(ot,{"list-tab":e(y),"tab-active":e(n),onClick:L},{"more-tab":m(()=>[c(st,{onSelect:O})]),_:1},8,["list-tab","tab-active"]),t("div",he,[(T(!0),k(j,null,H(e(o),(V,it)=>(T(),k("div",{key:it,class:"p-4 border border-solid border-[#dbdbdb] mr-6 rounded-lg min-w-[300px]"},[t("div",we,[t("span",De,u($(V.transactionType)),1),t("div",null,[c(nt,{color:V.transactionType==="TOTAL"?"#DD7D00":"",icon:A(V.transactionType),size:"24"},null,8,["color","icon"])])]),t("div",ge,[t("span",Fe,u(e(F)(V.totalTransactionFee,e(n))),1),t("span",ke,u(e(n)),1)]),t("div",null,[t("span",Ae,"~$"+u(e(F)(V.totalTransactionFeeUsd,"USD")),1)])]))),128))],512),c(lt,{ref:"refFilter","list-sort":e(p),popper:!1,"width-dropdown":"230","popup-name":"popup-filter-fee","sort-active":e(a).orderBy,onSort:J,onSearch:Y},null,8,["list-sort","sort-active"]),c(ve,{class:"px-6","is-loading":e(i),data:e(D),query:e(f),onLimitChange:X,onPageChange:Q,onRowClick:Z},null,8,["is-loading","data","query"])]),c(Ct,{"transaction-type":e(a).transactionType,status:e(a).status,"list-transaction-type":e(v),"is-show-footer":!0,onReset:et,onApply:at,onSearch:Y},null,8,["transaction-type","status","list-transaction-type"]),c(re,{"detail-transaction":e(w)},null,8,["detail-transaction"])])}}});const Le=vt(Ce,[["__scopeId","data-v-66496017"]]);export{Le as default};
